<html>
<head>
  <title>TakeMeHome</title>
  <meta charset="utf-8">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
</head>
<body>
<div>
  <div class="col-xs-12 nopadding" style="background-color: #9FA8DA">
    <div class="col-xs-12 nopadding">
      <div class="col-xs-11" style="padding-right: 0px;">
        <div class="input-group input-group-sm">
          <span class="input-group-addon" id="basic-addon1">De</span>
          <input id="fromAdress" type="text" class="form-control" placeholder="Adresse de départ" aria-describedby="basic-addon1">
        </div>
        <div class="input-group input-group-sm">
          <span class="input-group-addon" id="basic-addon2">À</span>
          <input id="toAdress" type="text" class="form-control" placeholder="Adresse d'arrivé" aria-describedby="basic-addon2">
        </div>

      </div>
      <div class="col-xs-1 text-center switch" style="vertical-align: middle">
        <span class="glyphicon glyphicon-resize-vertical" aria-hidden="true"></span>
      </div>
    </div>
    <div class="col-xs-12 text-center">
      <button id="validateRoute" type="button" class="btn btn-default">Go</button>
    </div>
  </div>


  <div class="col-xs-12 nopadding">
    <!-- Nav tabs -->
    <ul id="tabs">
    </ul>

    <!-- Tab panes -->
    <div id="tabs-content" class="tab-content">
    </div>
  </div>
</div>



<div class="route-detail">
  <div class="col-xs-12 header">
    <div class="col-xs-2" id="closePopup">X</div>
    <div class="col-xs-8 text-center">Itinéraire</div>
    <div class="col-xs-2" id="print">Print</div>
  </div>
  <div class="col-xs-12" id="map">
  </div>
  <div class="col-xs-12 route-body">
    <div class="col-xs-12 short-detail">
        <div class="col-xs-2 col-xs-offset-1 text-right">
          <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
        </div>
        <div id="total-time" class="col-xs-3 text-center" style="font-size: 11px; color: #43b492; border-left: 1px solid #d2d1cd">42 min</div>
        <div id="route-time" class="col-xs-4" style="font-size: 11px; border-left: 1px solid #d2d1cd; ">14:26 > 15:08</div>
    </div>
    <div class="col-xs-12 detail">
      <ul class="route-line">
      </ul>
    </div>
  </div>
</div>


<!-- Insert this line above script imports  -->
<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

<!-- normal script imports etc  -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAfIKgliacOOeWvA766IzKERq70_Kadf7o&amp;libraries=places" type="text/javascript"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>

<script type="text/javascript" src="js/main.js"></script>

<script>

$(document).on("click", "#tabs li", function () {
  setData($(this).attr("data-index"));
})

</script>

<script type="text/javascript">
var autocompleteFrom, autocompleteTo;

function initialize() {
  console.log("init google map");
  var input = document.getElementById('fromAdress');
  autocompleteFrom = new google.maps.places.Autocomplete(input);
  google.maps.event.addListener(autocompleteFrom, 'place_changed', function () {
    var place = autocompleteFrom.getPlace();
    console.log("from : place", place.name);
    console.log("from : lat", place.geometry.location.lat(), "lng", place.geometry.location.lng());
  });

  var input2 = document.getElementById('toAdress');
  autocompleteTo = new google.maps.places.Autocomplete(input2);
  google.maps.event.addListener(autocompleteTo, 'place_changed', function () {
    var place = autocompleteTo.getPlace();
    console.log("to : place", place.name);
    console.log("to : lat", place.geometry.location.lat(), "lng", place.geometry.location.lng());
  });

/*
  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 48.8037874, lng: 2.37809900000002},
    zoom: 12,
    disableDefaultUI: true
  });
*/
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>

<script>
$("#validateRoute").on("click", function () {
  var place;
  var stops = {
      from : {
        long : 0,
        lat : 0,
      },
      to : {
        long : 0,
        lat : 0,
      }
  };

  // from
  place = autocompleteFrom.getPlace();
  if (!place || place.name == "")
    return;

  stops.from = {
    lng : place.geometry.location.lng(),
    lat : place.geometry.location.lat(),
  }

  // to
  place = autocompleteTo.getPlace();
  if (!place || place.name == "")
    return;

  stops.to = {
    lng : place.geometry.location.lng(),
    lat : place.geometry.location.lat(),
  }

  findRoutes(stops);
});


/*
$(function() {
  findRoutes({
    from : {
      lng: "2.37809900000002",
      lat: "48.8037874"
    },
    to : {
      lng: "2.387552199999959",
      lat: "48.84978859999999"
    }
  });
})
*/

$("#closePopup").on("click", function () {
  $(".route-detail").removeClass("active");
});
</script>

<script>if (window.module) module = window.module;</script>
</body>
</html>
